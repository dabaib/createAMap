<template>
  <div class="help-dialog-overlay" @click.self="$emit('close')">
    <div class="help-dialog">
      <div class="help-header">
        <h3>ä½¿ç”¨æ‰‹å†Œ</h3>
        <button class="close-btn" @click="$emit('close')">Ã—</button>
      </div>
      <div class="help-content">
        <section>
          <h4>ğŸŒ åŸºç¡€æ“ä½œ</h4>
          <ul>
            <li><strong>å¹³ç§»åœ°å›¾</strong>ï¼šåœ¨ç”»å¸ƒç©ºç™½å¤„æˆ–æ ‡ç­¾ä¸ŠæŒ‰ä½<strong>é¼ æ ‡å·¦é”®</strong>æ‹–æ‹½ã€‚</li>
            <li><strong>ç¼©æ”¾åœ°å›¾</strong>ï¼šæ»šåŠ¨é¼ æ ‡æ»šè½®ã€‚</li>
            <li><strong>é‡ç½®è§†å›¾</strong>ï¼šç‚¹å‡»å·¥å…·æ çš„â€œé‡ç½®è§†å›¾â€æŒ‰é’®ã€‚</li>
          </ul>
        </section>

        <section>
          <h4>ğŸ› ï¸ å·¥å…·æ åŠŸèƒ½</h4>
          <ul>
            <li><strong>é€‰æ‹©å·¥å…· (V)</strong>ï¼šé»˜è®¤æ¨¡å¼ï¼Œç”¨äºé€‰ä¸­ã€æŸ¥çœ‹å’Œæ‹–æ‹½åŒºåŸŸã€‚</li>
            <li><strong>ç¼–è¾‘å·¥å…· (E)</strong>ï¼šæ˜¾ç¤ºåŒºåŸŸèŠ‚ç‚¹ï¼Œå…è®¸æ‹–æ‹½èŠ‚ç‚¹è°ƒæ•´è¾¹ç•Œã€‚</li>
            <li><strong>ç»˜åˆ¶å·¥å…· (D)</strong>ï¼šåˆ›å»ºæ–°åŒºåŸŸã€‚ç‚¹å‡»æ·»åŠ èŠ‚ç‚¹ï¼ŒåŒå‡»å®Œæˆã€‚å³é”®å–æ¶ˆã€‚</li>
            <li><strong>æ ‡è®°å·¥å…· (M)</strong>ï¼šç‚¹å‡»åœ°å›¾æ·»åŠ ç‚¹æ ‡è®°ã€‚</li>
            <li><strong>åˆ‡å‰²å·¥å…· (S)</strong>ï¼šç»˜åˆ¶æŠ˜çº¿å°†ä¸€ä¸ªåŒºåŸŸåˆ†å‰²ä¸ºä¸¤ä¸ªã€‚</li>
          </ul>
        </section>

        <section>
          <h4>ğŸ“‚ æ•°æ®ç®¡ç†</h4>
          <ul>
            <li><strong>å¯¼å…¥/å¯¼å‡º</strong>ï¼šæ”¯æŒ GeoJSON æ ¼å¼æ–‡ä»¶ã€‚</li>
            <li><strong>æœ¬åœ°ä¿å­˜</strong>ï¼šç‚¹å‡»â€œä¿å­˜â€å°†å½“å‰è¿›åº¦å­˜å…¥æµè§ˆå™¨ç¼“å­˜ï¼Œä¸‹æ¬¡è®¿é—®ç‚¹å‡»â€œåŠ è½½â€æ¢å¤ã€‚</li>
            <li><strong>æ’¤é”€/é‡åš</strong>ï¼šæ”¯æŒ Ctrl+Z / Ctrl+Y å¿«æ·é”®ã€‚</li>
          </ul>
        </section>

        <section>
          <h4>âœ‚ï¸ è¿›é˜¶åŠŸèƒ½ï¼šåŒºåŸŸåˆ‡å‰²</h4>
          <p>æ”¯æŒ<strong>è‡ªå®šä¹‰æŠ˜çº¿</strong>å’Œ<strong>MultiPolygon</strong>åˆ‡å‰²ã€‚</p>
          <ul>
            <li>å…ˆé€‰ä¸­è¦åˆ‡å‰²çš„åŒºåŸŸã€‚</li>
            <li>ç»˜åˆ¶åˆ‡å‰²çº¿ï¼šå¿…é¡»è´¯ç©¿åŒºåŸŸï¼ˆä»å¤–å…¥ï¼Œä»å¤–å‡ºï¼‰ã€‚</li>
            <li>åŒå‡»ç»“æŸç»˜åˆ¶å¹¶ç¡®è®¤åˆ‡å‰²ã€‚</li>
          </ul>
          <div class="image-container">
            <img src="/manual/split_initial_state.png" alt="åˆ‡å‰²ç¤ºä¾‹" />
          </div>
        </section>

        <section>
          <h4>ğŸ·ï¸ è¿›é˜¶åŠŸèƒ½ï¼šæ ‡ç­¾æ‹–æ‹½</h4>
          <p>åœ¨<strong>ç¼–è¾‘æ¨¡å¼</strong>ä¸‹ï¼Œå¯ä»¥ç›´æ¥<strong>æ‹–æ‹½åŒºåŸŸåç§°</strong>æ¥è°ƒæ•´ä½ç½®ã€‚</p>
          <div class="image-container">
            <img src="/manual/label_drag.webp" alt="æ ‡ç­¾æ‹–æ‹½æ¼”ç¤º" />
          </div>
        </section>

        <section>
          <h4>âŒ¨ï¸ å¿«æ·é”®åˆ—è¡¨</h4>
          <table class="shortcut-table">
            <tr><td><code>V</code></td><td>é€‰æ‹©æ¨¡å¼</td></tr>
            <tr><td><code>E</code></td><td>ç¼–è¾‘æ¨¡å¼</td></tr>
            <tr><td><code>D</code></td><td>ç»˜åˆ¶æ¨¡å¼</td></tr>
            <tr><td><code>S</code></td><td>åˆ‡å‰²æ¨¡å¼</td></tr>
            <tr><td><code>M</code></td><td>æ ‡è®°æ¨¡å¼</td></tr>
            <tr><td><code>Ctrl + Z</code></td><td>æ’¤é”€</td></tr>
            <tr><td><code>Ctrl + Y</code></td><td>é‡åš</td></tr>
            <tr><td><code>Delete</code></td><td>åˆ é™¤é€‰ä¸­è¦ç´ </td></tr>
          </table>
        </section>
      </div>
    </div>
  </div>
</template>

<script setup>
defineEmits(['close'])
</script>

<style scoped>
.help-dialog-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
}

.help-dialog {
  background: #2c3e50;
  width: 600px;
  max-width: 90%;
  max-height: 80vh;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.help-header {
  padding: 16px;
  background: #34495e;
  border-bottom: 1px solid #465c71;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.help-header h3 {
  margin: 0;
  color: #ecf0f1;
}

.close-btn {
  background: none;
  border: none;
  color: #bdc3c7;
  font-size: 24px;
  cursor: pointer;
}

.close-btn:hover {
  color: #fff;
}

.help-content {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
  color: #ecf0f1;
}

section {
  margin-bottom: 24px;
}

h4 {
  color: #4ecdc4;
  margin-bottom: 12px;
  border-bottom: 1px solid #465c71;
  padding-bottom: 4px;
}

ul {
  padding-left: 20px;
  margin-bottom: 12px;
}

li {
  margin-bottom: 6px;
}

.image-container {
  margin: 12px 0;
  border: 1px solid #465c71;
  border-radius: 4px;
  overflow: hidden;
}

img {
  width: 100%;
  display: block;
}

code {
  background: #1a252f;
  padding: 2px 4px;
  border-radius: 3px;
  font-family: monospace;
}

.shortcut-table {
  width: 100%;
  border-collapse: collapse;
}

.shortcut-table td {
  padding: 8px;
  border-bottom: 1px solid #465c71;
  color: #bdc3c7;
}

.shortcut-table tr:last-child td {
  border-bottom: none;
}

.shortcut-table td:first-child {
  width: 120px;
  font-weight: bold;
  color: #74b9ff;
}
</style>
